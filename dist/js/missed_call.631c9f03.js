(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["missed_call"],{"8eab":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("div",[a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md10:""}},[a("v-card",{staticClass:"mx-auto"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12"}},[a("div",[a("div",{staticClass:"ml-4 mr-4"},[a("h3",{staticClass:"mt-6 ml-5 mb-5 text-center"},[e._v("Missed calls")])]),a("v-select",{attrs:{items:e.virtual_number_list,label:"Virtual number",required:""},on:{change:function(t){return e.changeview(e.selected_virtual_number)}},model:{value:e.selected_virtual_number,callback:function(t){e.selected_virtual_number=t},expression:"selected_virtual_number"}}),a("h3",{staticClass:"mt-2 ml-3"},[e._v("Routing method - New caller")]),a("v-radio-group",{staticClass:"ml-3",attrs:{mandatory:""},model:{value:e.radios1,callback:function(t){e.radios1=t},expression:"radios1"}},[a("v-radio",{attrs:{label:"Assign to all",value:"All"}}),a("v-radio",{attrs:{label:"Assign to Specific Agent(s)",value:"Specific-Agent"}}),"Specific-Agent"==e.radios1?a("div",{attrs:{"no-action":""}},e._l(e.seleted_users,(function(t){return a("div",{key:t.Name},[a("v-checkbox",{attrs:{value:t.Name,label:t.Name},model:{value:e.getMissed,callback:function(t){e.getMissed=t},expression:"getMissed"}})],1)})),0):e._e(),a("v-radio",{attrs:{label:"Assign in Round Robin",value:"Round-Robin"}}),a("v-radio",{attrs:{label:"Assign to last Attempted",value:"Last-Attempted"}})],1),a("h3",{staticClass:"mt-2 ml-3"},[e._v("Routing method - Repeated caller")]),a("v-checkbox",{attrs:{label:"Sticky Agent"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),a("v-btn",{staticClass:"ml-4",attrs:{color:"primary"},on:{click:function(t){return e.applyRouting()}}},[e._v("Apply Routing")])],1)],1),a("br"),a("br")],1)],1)],1)],1)],1)])},r=[],s=a("1da1"),n=a("53ca"),l=(a("96cf"),a("159b"),a("2591")),o=a("56d7"),u={data:function(){return{uid:"",phno:"",name:"",virtual_number:"",virtual_number_list:[],selected_virtual_number:"",role:"",detail:{},participants:{},added_list_json:{},Udata:[],realdata:[],all_participants:[],user_listing:[],added_list:[],seleted_users:[],toggle_none:null,userUid:"",ownerid:"",radios1:null,radios2:null,selected:!1,getMissed:[],checkboxes:[],selected2:[]}},methods:{changeview:function(e){var t=this;o["db"].collection("uservirtualNumber").where("VirtualNumber","==",e).get().then((function(e){e.forEach((function(e){console.log(e.id," => ",e.data());var a=e.data();t.uid=a.Uid,t.virtual_number=a.VirtualNumber,t.virtual_number_list.push(t.virtual_number),t.Udata=a;var i=t.Udata.Participants;t.radios1=t.Udata.NewMissedCaller,t.radios2=t.Udata.RepeatedMissedCaller,console.log("radio",t.radios1),t.radios2&&(t.selected=!1),null==t.radios1&&(t.radios1="Round_Robin"),"Sticky-Disable"==t.radios2&&(t.selected=!1),i.forEach((function(e){console.log("loop items",e),t.added_list_json=Object.assign({},t.added_list_json,{Number:e.Number,Name:e.Name,AgentUid:e.AgentUid}),t.added_list.push(t.added_list_json),t.seleted_users.push(t.added_list_json)})),console.log("im getting",t.added_list),console.log("before data ",t.seleted_users)}))})).catch((function(e){console.log("Error getting documents: ",e)})),console.log("type of ",Object(n["a"])(this.virtual_number_list)),this.selected_virtual_number=this.virtual_number_list[0],console.log(this.virtual_number_list[0]),o["db"].collection("users").where("OwnerUid","==",this.uid).get().then((function(e){e.forEach((function(e){console.log(e.id," => ",e.data());var a=e.data();t.Udata=a,t.Udata=a,t.Udata.virtualNumber&&(t.virtual_number_list.push(t.Udata.virtualNumber),console.log("listing virtualNumber",t.virtual_number_list))}))})).catch((function(e){console.log("Error getting documents: ",e)}))},applyRouting:function(){this.selected||(this.radios2=null),console.log(this.getMissed);var e={url:"https://asia-south1-tringpartner-v2.cloudfunctions.net/tpv2/callDistribution/missedcall",method:"POST",data:{owner_uid:this.uid,updated_by:this.uid,virtual_number:this.selected_virtual_number,source:"general",participants:this.seleted_users,new_missed_caller:this.radios1,repeated_missed_caller:"Sticky-Disable"}};console.log(e),this.$axios(e).then((function(e){console.log(e),alert(e.data.message)})).catch((function(e){console.error(e)}))}},created:function(){var e=this;l["a"].auth().onAuthStateChanged(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=5;break}return console.log("logged user details",a),e.uid=a.uid,t.next=5,o["db"].collection("users").where("uid","==",e.uid).get().then((function(t){t.forEach(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(a.id," => ",a.data()),i=a.data(),console.log(i.role),"OWNER"!=i.role&&"ADMIN"!=i.role||"ADMIN"==i.role&&(e.uid=i.OwnerUid,console.log(e.uid)),t.next=6,o["db"].collection("uservirtualNumber").where("Uid","==",e.uid).get().then((function(t){t.forEach(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(a.id," => ",a.data()),i=a.data(),e.uid=i.Uid,e.virtual_number=i.VirtualNumber,e.virtual_number_list.push(e.virtual_number);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})).catch((function(e){console.log("Error getting documents: ",e)}));case 6:return console.log("type of ",Object(n["a"])(e.virtual_number_list)),e.selected_virtual_number=e.virtual_number_list[0],console.log(e.virtual_number_list[0]),t.next=11,o["db"].collection("uservirtualNumber").where("VirtualNumber","==",e.selected_virtual_number).get().then((function(t){t.forEach((function(t){console.log(t.id," => ",t.data());var a=t.data();e.uid=a.Uid,e.Udata=a;var i=e.Udata.Participants;e.radios1=e.Udata.NewMissedCaller,e.radios2=e.Udata.RepeatedMissedCaller,e.radios2&&(e.selected=!0),console.log("radio",e.radios1),e.radios2&&(e.selected=!0),null==e.radios1&&(e.radios1="Round_Robin"),"Sticky-Disable"==e.radios2&&(e.selected=!1),i.forEach((function(t){console.log("loop items",t),e.added_list_json=Object.assign({},e.added_list_json,{Number:t.Number,Name:t.Name,AgentUid:t.AgentUid}),e.added_list.push(e.added_list_json),e.seleted_users.push(e.added_list_json)})),console.log("im getting",e.added_list),console.log("before data ",e.seleted_users)}))})).catch((function(e){console.log("Error getting documents: ",e)}));case 11:o["db"].collection("users").where("OwnerUid","==",e.uid).get().then((function(t){t.forEach((function(t){console.log(t.id," => ",t.data());var a=t.data();e.Udata=a,e.Udata=a,e.Udata.virtualNumber&&(e.virtual_number_list.push(e.Udata.virtualNumber),console.log("listing virtualNumber",e.virtual_number_list))}))})).catch((function(e){console.log("Error getting documents: ",e)}));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},d=u,c=a("2877"),m=a("6544"),_=a.n(m),b=a("7496"),g=a("8336"),v=a("b0af"),h=a("ac7c"),p=a("62ad"),f=a("a523"),w=a("0e8f"),N=a("a722"),U=a("67b6"),R=a("43a6"),x=a("0fd9"),k=a("b974"),A=Object(c["a"])(d,i,r,!1,null,null,null);t["default"]=A.exports;_()(A,{VApp:b["a"],VBtn:g["a"],VCard:v["a"],VCheckbox:h["a"],VCol:p["a"],VContainer:f["a"],VFlex:w["a"],VLayout:N["a"],VRadio:U["a"],VRadioGroup:R["a"],VRow:x["a"],VSelect:k["a"]})}}]);
//# sourceMappingURL=missed_call.631c9f03.js.map