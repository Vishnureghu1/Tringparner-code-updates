(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["block_calls"],{"99d9":function(t,a,e){"use strict";e.d(a,"a",(function(){return o})),e.d(a,"b",(function(){return s})),e.d(a,"c",(function(){return r}));var l=e("b0af"),n=e("80d2"),o=Object(n["h"])("v-card__actions"),c=Object(n["h"])("v-card__subtitle"),s=Object(n["h"])("v-card__text"),r=Object(n["h"])("v-card__title");l["a"]},c4c9:function(t,a,e){"use strict";e.r(a);var l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-app",[e("div",[e("v-container",{attrs:{fluid:""}},[e("v-layout",{attrs:{"align-center":"","justify-center":""}},[e("v-flex",{attrs:{xs12:"",sm12:"",md10:""}},[e("v-card",{staticClass:"mx-auto"},[e("v-row",{attrs:{"no-gutters":""}},[e("v-col",{attrs:{cols:"12"}},[e("div"),e("div",[e("div",{staticClass:"ml-4 mr-4"},[e("h3",{staticClass:"mt-6 ml-5 mb-5 text-center"},[t._v("Blocked list")])])]),e("v-tabs",{attrs:{"background-color":"white",color:"black","fixed-tabs":""}},[e("v-tab",[t._v("Recent unique Call list")]),e("v-tab",[t._v("Blocked List")]),t._l(2,(function(a){return e("v-tab-item",{key:a},[e("v-container",{attrs:{fluid:""}},[1==a?e("v-card-text",[e("v-expansion-panels",t._l(t.realdata,(function(a){return e("v-expansion-panel",{key:a.text},[0==a.isBlocked?e("v-expansion-panel-header",[e("div",[t._v(" "+t._s(a.callerNumber)+" "),e("v-btn",{attrs:{color:"red",text:""},on:{click:function(e){return t.block_user(a.callerNumber,a.virtual_number)}}},[t._v(" block ")]),e("br"),e("span",{staticClass:"mt-1"},[t._v("Last call : "+t._s(a.dateTime))])],1)]):t._e(),0==a.isBlocked?e("v-expansion-panel-content"):t._e()],1)})),1)],1):t._e(),2==a?e("v-card-text",[e("v-expansion-panels",t._l(t.realdata,(function(a){return e("v-expansion-panel",{key:a.text},[a.isBlocked?e("v-expansion-panel-header",[e("div",[t._v(" "+t._s(a.callerNumber)+" "),e("v-btn",{attrs:{color:"red",text:""},on:{click:function(e){return t.unblock_user(a.callerNumber,a.virtual_number)}}},[t._v(" unblock ")]),e("br"),e("span",{staticClass:"mt-1"},[t._v("Last call : "+t._s(a.dateTime))])],1)]):t._e(),a.isBlocked?e("v-expansion-panel-content"):t._e()],1)})),1)],1):t._e()],1)],1)}))],2)],1)],1)],1)],1)],1)],1)],1)])},n=[],o=(e("fb6a"),e("159b"),e("252b")),c=e("56d7"),s=e("c1df"),r=e.n(s),i={created:function(){var t=this;o["a"].auth().onAuthStateChanged((function(a){a&&(console.log("logged user details",a),t.uid=a.uid,t.phno=a.phoneNumber.slice(3),console.log("page call logs il user id",t.uid),console.log("page call logs il user number",t.phno),c["db"].collection("users").where("uid","==",t.uid).get().then((function(a){a.forEach((function(a){console.log(a.id," => ",a.data());var e=a.data();console.log(e.role),"OWNER"!=e.role&&"ADMIN"!=e.role||("ADMIN"==e.role&&(t.uid=e.OwnerUid),c["db"].collection("blockCalls").where("Uid","==",t.uid).onSnapshot((function(a){t.realdata=[],a.empty?alert("no calls"):a.forEach((function(a){console.log(a.id," => ",a.data());var e=a.data();t.calldetails=e;var l=t.calldetails.lastCall,n=new Date(l);console.log("full time",n);var o=r()(n).format("hh:mm a");o=r()(n).fromNow(),console.log("converted time",o),t.detail=Object.assign({},t.detail,{callstatus:t.calldetails.callstatus,dateTime:o,callerNumber:t.calldetails.Number,virtual_number:t.calldetails.VirtualNumber,isBlocked:t.calldetails.isBlocked}),t.realdata.push(t.detail),console.log("snap calllog ",t.realdata)}))})))}))})).catch((function(t){console.log("Error getting documents: ",t)})))}))},data:function(){return{uid:"",phno:"",detail:{},blocked_detail:{},blocked_list:[],realdata:[],calldetails:[],call_list:[],virtual_number:"",dialog:!1}},methods:{block_user:function(t,a){var e={url:"https://asia-south1-tringpartner-v2.cloudfunctions.net/tpv2/blockcall",method:"POST",data:{owner_uid:this.uid,status:!0,virtual_number:a,number:t}};console.log(e),this.$axios(e).then((function(t){console.log(t),alert("Successfully Blocked")})).catch((function(t){console.log("Error getting documents: ",t)}))},unblock_user:function(t,a){var e={url:"https://asia-south1-tringpartner-v2.cloudfunctions.net/tpv2/blockcall",method:"POST",data:{owner_uid:this.uid,status:!1,virtual_number:a,number:t}};console.log(e),this.$axios(e).then((function(t){console.log(t),alert("Successfully Unblocked")})).catch((function(t){console.log("Error getting documents: ",t)}))}}},u=i,d=e("2877"),v=e("6544"),b=e.n(v),f=e("7496"),p=e("8336"),_=e("b0af"),m=e("99d9"),h=e("62ad"),g=e("a523"),k=e("cd55"),x=e("49e2"),V=e("c865"),w=e("0393"),C=e("0e8f"),N=e("a722"),E=e("0fd9"),B=e("71a3"),O=e("c671"),y=e("fe57"),T=Object(d["a"])(u,l,n,!1,null,null,null);a["default"]=T.exports;b()(T,{VApp:f["a"],VBtn:p["a"],VCard:_["a"],VCardText:m["b"],VCol:h["a"],VContainer:g["a"],VExpansionPanel:k["a"],VExpansionPanelContent:x["a"],VExpansionPanelHeader:V["a"],VExpansionPanels:w["a"],VFlex:C["a"],VLayout:N["a"],VRow:E["a"],VTab:B["a"],VTabItem:O["a"],VTabs:y["a"]})}}]);
//# sourceMappingURL=block_calls.48f5b397.js.map