(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["block_calls"],{c4c9:function(a,e,t){"use strict";t.r(e);var l=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("v-app",[t("div",[t("v-container",{attrs:{fluid:""}},[t("v-layout",{attrs:{"align-center":"","justify-center":""}},[t("v-flex",{attrs:{xs12:"",sm12:"",md10:""}},[t("v-card",{staticClass:"mx-auto"},[t("v-row",{attrs:{"no-gutters":""}},[t("v-col",{attrs:{cols:"12"}},[t("div"),t("div",[t("div",{staticClass:"ml-4 mr-4"},[t("h3",{staticClass:"mt-6 ml-5 mb-5 text-center"},[a._v("Blocked list")])])]),t("v-tabs",{attrs:{"background-color":"white",color:"black","fixed-tabs":""}},[t("v-tab",[a._v("Recent unique Call list")]),t("v-tab",[a._v("Blocked List")]),a._l(2,(function(e){return t("v-tab-item",{key:e},[t("v-container",{attrs:{fluid:""}},[1==e?t("v-card-text",[t("v-expansion-panels",a._l(a.realdata,(function(e){return t("v-expansion-panel",{key:e.text},[0==e.isBlocked?t("v-expansion-panel-header",[t("div",[a._v(" "+a._s(e.callerNumber)+" "),t("v-btn",{attrs:{color:"red",text:""},on:{click:function(t){return a.block_user(e.callerNumber,e.virtual_number)}}},[a._v(" block ")]),t("br"),t("span",{staticClass:"mt-1"},[a._v("Last call : "+a._s(e.dateTime))])],1)]):a._e(),0==e.isBlocked?t("v-expansion-panel-content"):a._e()],1)})),1)],1):a._e(),2==e?t("v-card-text",[t("v-expansion-panels",a._l(a.realdata,(function(e){return t("v-expansion-panel",{key:e.text},[e.isBlocked?t("v-expansion-panel-header",[t("div",[a._v(" "+a._s(e.callerNumber)+" "),t("v-btn",{attrs:{color:"red",text:""},on:{click:function(t){return a.unblock_user(e.callerNumber,e.virtual_number)}}},[a._v(" unblock ")]),t("br"),t("span",{staticClass:"mt-1"},[a._v("Last call : "+a._s(e.dateTime))])],1)]):a._e(),e.isBlocked?t("v-expansion-panel-content"):a._e()],1)})),1)],1):a._e()],1)],1)}))],2)],1)],1)],1)],1)],1)],1)],1)])},n=[],o=(t("fb6a"),t("159b"),t("252b")),c=t("56d7"),s=t("c1df"),r=t.n(s),i={created:function(){var a=this;o["a"].auth().onAuthStateChanged((function(e){e&&(console.log("logged user details",e),a.uid=e.uid,a.phno=e.phoneNumber.slice(3),console.log("page call logs il user id",a.uid),console.log("page call logs il user number",a.phno),c["db"].collection("users").where("uid","==",a.uid).get().then((function(e){e.forEach((function(e){console.log(e.id," => ",e.data());var t=e.data();console.log(t.role),"OWNER"!=t.role&&"ADMIN"!=t.role||("ADMIN"==t.role&&(a.uid=t.OwnerUid),c["db"].collection("blockCalls").where("Uid","==",a.uid).onSnapshot((function(e){a.realdata=[],e.empty?alert("no calls"):e.forEach((function(e){console.log(e.id," => ",e.data());var t=e.data();a.calldetails=t;var l=a.calldetails.lastCall,n=new Date(l);console.log("full time",n);var o=r()(n).format("hh:mm a");o=r()(n).fromNow(),console.log("converted time",o),a.detail=Object.assign({},a.detail,{callstatus:a.calldetails.callstatus,dateTime:o,callerNumber:a.calldetails.Number,virtual_number:a.calldetails.VirtualNumber,isBlocked:a.calldetails.isBlocked}),a.realdata.push(a.detail),console.log("snap calllog ",a.realdata)}))})))}))})).catch((function(a){console.log("Error getting documents: ",a)})))}))},data:function(){return{uid:"",phno:"",detail:{},blocked_detail:{},blocked_list:[],realdata:[],calldetails:[],call_list:[],virtual_number:"",dialog:!1}},methods:{block_user:function(a,e){var t={url:"https://asia-south1-tringpartner-v2.cloudfunctions.net/tpv2/blockcall",method:"POST",data:{owner_uid:this.uid,status:!0,virtual_number:e,number:a}};console.log(t),this.$axios(t).then((function(a){console.log(a),alert("Successfully Blocked")})).catch((function(a){console.log("Error getting documents: ",a)}))},unblock_user:function(a,e){var t={url:"https://asia-south1-tringpartner-v2.cloudfunctions.net/tpv2/blockcall",method:"POST",data:{owner_uid:this.uid,status:!1,virtual_number:e,number:a}};console.log(t),this.$axios(t).then((function(a){console.log(a),alert("Successfully Unblocked")})).catch((function(a){console.log("Error getting documents: ",a)}))}}},u=i,d=t("2877"),v=t("6544"),b=t.n(v),p=t("7496"),m=t("8336"),f=t("b0af"),_=t("99d9"),h=t("62ad"),g=t("a523"),k=t("cd55"),x=t("49e2"),V=t("c865"),w=t("0393"),C=t("0e8f"),N=t("a722"),E=t("0fd9"),B=t("71a3"),y=t("c671"),T=t("fe57"),O=Object(d["a"])(u,l,n,!1,null,null,null);e["default"]=O.exports;b()(O,{VApp:p["a"],VBtn:m["a"],VCard:f["a"],VCardText:_["b"],VCol:h["a"],VContainer:g["a"],VExpansionPanel:k["a"],VExpansionPanelContent:x["a"],VExpansionPanelHeader:V["a"],VExpansionPanels:w["a"],VFlex:C["a"],VLayout:N["a"],VRow:E["a"],VTab:B["a"],VTabItem:y["a"],VTabs:T["a"]})}}]);
//# sourceMappingURL=block_calls.edf9f02e.js.map