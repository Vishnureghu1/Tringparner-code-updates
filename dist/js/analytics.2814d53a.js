(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["analytics"],{"07ac":function(e,t,a){var s=a("23e7"),n=a("6f53").values;s({target:"Object",stat:!0},{values:function(e){return n(e)}})},"4de4":function(e,t,a){"use strict";var s=a("23e7"),n=a("b727").filter,r=a("1dde"),i=r("filter");s({target:"Array",proto:!0,forced:!i},{filter:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},"6f53":function(e,t,a){var s=a("83ab"),n=a("df75"),r=a("fc6a"),i=a("d1e7").f,l=function(e){return function(t){var a,l=r(t),o=n(l),d=o.length,u=0,c=[];while(d>u)a=o[u++],s&&!i.call(l,a)||c.push(e?[a,l[a]]:l[a]);return c}};e.exports={entries:l(!0),values:l(!1)}},"7db0":function(e,t,a){"use strict";var s=a("23e7"),n=a("b727").find,r=a("44d2"),i="find",l=!0;i in[]&&Array(1)[i]((function(){l=!1})),s({target:"Array",proto:!0,forced:l},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),r(i)},b0c0:function(e,t,a){var s=a("83ab"),n=a("9bf2").f,r=Function.prototype,i=r.toString,l=/^\s*function ([^ (]*)/,o="name";s&&!(o in r)&&n(r,o,{configurable:!0,get:function(){try{return i.call(this).match(l)[1]}catch(e){return""}}})},d81d:function(e,t,a){"use strict";var s=a("23e7"),n=a("b727").map,r=a("1dde"),i=r("map");s({target:"Array",proto:!0,forced:!i},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},fca0:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md8:""}},[a("v-card",{staticClass:"mx-auto"},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12"}},[a("div",[a("div",{staticClass:"mr-4"},[a("h3",{staticClass:"mt-6 text-center"},[e._v("Analytics")])]),a("div",{staticClass:"ml-4"},[a("h3",{staticClass:"mt-3 text-left"},[e._v("Total : "+e._s(e.total)+" ")]),a("h3",{staticClass:"mt-3 text-left"},[e._v("Answered : "+e._s(e.total_answered)+" ")]),a("h3",{staticClass:"mt-3 text-left"},[e._v("Missed : "+e._s(e.total_missed)+" ")]),a("h3",{staticClass:"mt-3 text-left"},[e._v("Callback Attempted: "+e._s(e.total_callback)+" ")]),a("h3",{staticClass:"mt-3 text-left"},[e._v("Missed Open : "+e._s(e.missed_open)+" ")])]),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.table_missed_open,items:e.total_users,"hide-default-footer":""}}),a("v-divider"),a("h3",{staticClass:"mt-3 text-center"},[e._v("Calls Forwarded Vs Calls Answered")]),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.table_forwarded,items:e.total_users,"hide-default-footer":""}}),a("v-divider"),a("h3",{staticClass:"mt-3 text-center"},[e._v("Missed Assigned Vs Callback Attempts")]),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.table_missed_assigned,items:e.total_users,"hide-default-footer":""}})],1)])],1)],1)],1)],1)],1)],1)},n=[],r=a("1da1"),i=(a("96cf"),a("fb6a"),a("159b"),a("4de4"),a("d81d"),a("07ac"),a("b0c0"),a("7db0"),a("2591")),l=a("56d7"),o={created:function(){var e=this;i["a"].auth().onAuthStateChanged((function(t){t&&(console.log("logged user details",t),e.uid=t.uid,e.phno=t.phoneNumber.slice(3),l["db"].collection("users").where("uid","==",e.uid).get().then((function(t){e.total_users=[],t.forEach(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(a.id," => ",a.data()),s=a.data(),console.log(s.role),"ADMIN"!=s.role){t.next=11;break}return e.uid=s.OwnerUid,e.detail=Object.assign({},e.detail,{name:"Owner",uid:s.uid,missed_open:0,forwarded:0,answered:0,missed_assigned:0,callback:0}),e.total_users.push(e.detail),t.next=9,l["db"].collection("users").where("OwnerUid","==",e.uid).get().then((function(t){t.forEach(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(a.id," => ",a.data()),s=a.data(),e.detail=Object.assign({},e.detail,{name:s.Name,uid:s.uid,missed_open:0,forwarded:0,answered:0,missed_assigned:0,callback:0}),e.total_users.push(e.detail);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));case 9:t.next=16;break;case 11:if("OWNER"!=s.role){t.next=16;break}return e.detail={name:"Owner",uid:s.uid,missed_open:0,forwarded:0,answered:0,missed_assigned:0,callback:0},e.total_users.push(e.detail),t.next=16,l["db"].collection("users").where("OwnerUid","==",e.uid).get().then((function(t){t.forEach(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=a.data(),e.detail={name:s.Name,uid:s.uid,missed_open:0,forwarded:0,answered:0,missed_assigned:0,callback:0},e.total_users.push(e.detail);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));case 16:return console.log("users ",e.total_users),t.next=19,l["db"].collection("callLogs").where("owneruid","==",e.uid).orderBy("dateTime","desc").onSnapshot((function(t){e.realdata=[],console.log("*************snap called**************",e.total_users),t.empty?alert("no calls"):(e.total=0,e.total_answered=0,e.total_missed=0,e.total_callback=0,e.missed_open=0,console.log(),e.total_users.filter((function(e){return e.missed_open>=0})).missed_open=0,e.total_users.filter((function(e){return e.answered>=0})).answered=0,e.total_users.filter((function(e){return e.forwarded>=0})).forwarded=0,e.total_users.filter((function(e){return e.missed_assigned>=0})).missed_assigned=0,e.total_users.filter((function(e){return e.callback>=0})).callback=0,t.forEach(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.total++,s=a.data(),e.calldetails=s,"Answered"==e.calldetails.callstatus?(e.total_answered++,e.analytics(e.calldetails.agentDetails,"answered")):"Missed"==e.calldetails.callstatus&&(e.total_missed++,e.analytics(e.calldetails.agentDetails,"missed"),e.calldetails.ClickCount?(e.total_callback++,e.analytics(e.calldetails.ClickCount.Uid,"callback_attempted")):(e.missed_open++,e.analytics(e.calldetails.agentDetails,"missed_open"),e.analytics(e.calldetails.agentDetails,"missed_assigned")));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}));case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})).catch((function(e){console.log("Error getting documents: ",e)})))}))},data:function(){return{uid:"",phno:"",called_name:"",role:"",detail:{},calldetails:[],realdata:[],click_details:{},clicked_array:[],callback_uid:"",total:"",total_answered:"",total_missed:"",total_callback:"",missed_open:"",total_users:[],table_missed_open:[{text:"Name",align:"start",value:"name"},{text:"Missed Open",value:"missed_open"}],table_forwarded:[{text:"Name",align:"start",value:"name"},{text:"Calls Forwarded",value:"forwarded"},{text:"Calls Answered",value:"answered"}],table_missed_assigned:[{text:"Name",align:"start",value:"name"},{text:"Missed Assigned",value:"missed_assigned"},{text:"Callback Attempts",value:"callback"}]}},methods:{analytics:function(e,t){var a=this;if("missed_open"==t){var s,n=[];Object.values(e).map((function(e){return n.push({name:e.Name,uid:e.AgentUid})}));for(var r=function(){var e=l[i];console.log("i value ",e),s=a.total_users.some((function(t){return t.uid===e.uid})),console.log("counter at ",s),0==s&&(a.detail={name:e.name,uid:e.uid,missed_open:0,forwarded:0,answered:0,missed_assigned:0,callback:0},a.total_users.push(a.detail)),a.total_users.find((function(t){return t.uid===e.uid})).missed_open++},i=0,l=n;i<l.length;i++)r();console.log("after missed_open",this.total_users),console.log("counter after",s)}else if("answered"==t){n=[],Object.values(e).map((function(e){return n.push({name:e.Name,uid:e.AgentUid})}));for(var o=function(){var e=u[d];console.log("i value ",e),s=a.total_users.some((function(t){return t.uid===e.uid})),console.log("counter at ",s),0==s&&(a.detail={name:e.name,uid:e.uid,missed_open:0,forwarded:0,answered:0,missed_assigned:0,callback:0},a.total_users.push(a.detail)),a.total_users.find((function(t){return t.uid===e.uid})).answered++,a.total_users.find((function(t){return t.uid===e.uid})).forwarded++},d=0,u=n;d<u.length;d++)o();console.log("after answered",this.total_users)}else if("missed"==t){n=[],Object.values(e).map((function(e){return n.push({name:e.Name,uid:e.AgentUid})}));for(var c=function(){var e=m[f];console.log("i value ",e),s=a.total_users.some((function(t){return t.uid===e.uid})),console.log("counter at ",s),0==s&&(a.detail={name:e.name,uid:e.uid,missed_open:0,forwarded:0,answered:0,missed_assigned:0,callback:0},a.total_users.push(a.detail)),a.total_users.find((function(t){return t.uid===e.uid})).forwarded++},f=0,m=n;f<m.length;f++)c();console.log("after missed",this.total_users)}else if("missed_assigned"==t){n=[],Object.values(e).map((function(e){return n.push({name:e.Name,uid:e.AgentUid})}));for(var _=function(){var e=h[g];console.log("i value ",e),s=a.total_users.some((function(t){return t.uid===e.uid})),console.log("counter at ",s),0==s&&(a.detail={name:e.name,uid:e.uid,missed_open:0,forwarded:0,answered:0,missed_assigned:0,callback:0},a.total_users.push(a.detail)),a.total_users.find((function(t){return t.uid===e.uid})).missed_assigned++},g=0,h=n;g<h.length;g++)_();console.log("after missed assign",this.total_users)}else"callback_attempted"==t&&(this.total_users.find((function(t){return t.uid===e})).callback++,console.log("after callback_attempted",this.total_users))},value_reset:function(){console.log("before",this.total_users),this.total_users.find((function(e){return e.missed_open>=0})).missed_open=0,this.total_users.find((function(e){return e.answered>=0})).answered=0,this.total_users.find((function(e){return e.forwarded>=0})).forwarded=0,this.total_users.find((function(e){return e.missed_assigned>=0})).missed_assigned=0,this.total_users.find((function(e){return e.callback>=0})).callback=0,console.log("after",this.total_users)}}},d=o,u=a("2877"),c=a("6544"),f=a.n(c),m=a("b0af"),_=a("62ad"),g=a("a523"),h=a("8fea"),p=a("ce7e"),v=a("0e8f"),w=a("a722"),b=a("0fd9"),k=Object(u["a"])(d,s,n,!1,null,null,null);t["default"]=k.exports;f()(k,{VCard:m["a"],VCol:_["a"],VContainer:g["a"],VDataTable:h["a"],VDivider:p["a"],VFlex:v["a"],VLayout:w["a"],VRow:b["a"]})}}]);
//# sourceMappingURL=analytics.2814d53a.js.map